# Apache VirtualHost Configuration for Journal Platform
# This configures Apache to act as a Reverse Proxy for your Node.js application.

<VirtualHost *:80>
    # Change "journal.local" to your desired domain or "localhost"
    ServerName journal.local
    ServerAdmin webmaster@journal.local

    # The public directory of your project
    DocumentRoot "/Users/bhupendrasingh/Desktop/journal-platform/public"

    <Directory "/Users/bhupendrasingh/Desktop/journal-platform/public">
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Require all granted
    </Directory>

    # Log files
    ErrorLog "/private/var/log/apache2/journal-platform-error_log"
    CustomLog "/private/var/log/apache2/journal-platform-access_log" common

    # Proxy Configuration
    # Requires: mod_proxy, mod_proxy_http
    
    ProxyRequests Off
    ProxyPreserveHost On
    
    # Forward all traffic to the Node.js server running on port 3000
    ProxyPass / http://127.0.0.1:3000/
    ProxyPassReverse / http://127.0.0.1:3000/

    # Optional: Serve static files directly by Apache for better performance
    # (Comment out the ProxyPass / line above and uncomment below to use this hybrid approach)
    # ProxyPass /api http://127.0.0.1:3000/api
    # ProxyPassReverse /api http://127.0.0.1:3000/api
    # ProxyPass /auth http://127.0.0.1:3000/auth
    # ProxyPassReverse /auth http://127.0.0.1:3000/auth
</VirtualHost>
